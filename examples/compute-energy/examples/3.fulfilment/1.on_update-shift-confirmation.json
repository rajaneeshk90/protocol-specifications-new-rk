{
  "context": {
    "version": "2.0.0",
    "action": "on_update",
    "domain": "beckn.one:DEG:compute-energy:1.0",
    "timestamp": "2025-11-17T14:02:02Z",
    "message_id": "msg-on-update-workload-shift-001",
    "transaction_id": "txn-ce-order1-001",
    "bap_id": "compflex-agent.computecloud.ai",
    "bap_uri": "https://compflex-agent.computecloud.ai",
    "bpp_id": "gridflex-agent.example.com",
    "bpp_uri": "https://gridflex-agent.example.com",
    "ttl": "PT30S"
  },
  "message": {
    "order": {
      "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld",
      "@type": "beckn:Order",
      "beckn:id": "order-ce-cambridge-morning-001",
      "beckn:orderStatus": "IN_PROGRESS",
      "beckn:seller": "provider-gridflex-001",
      "beckn:buyer": "buyer-compflex-001",
      "beckn:invoice": {
        "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld",
        "@type": "schema:Invoice",
        "schema:customer": {
          "email": "leena.jones@computecloud.ai",
          "phone": "+44 7911 123456",
          "legalName": "ComputeCloud.ai",
          "address": {
            "streetAddress": "123 Main St",
            "addressLocality": "Cambridge",
            "addressRegion": "East England",
            "postalCode": "CB1 2AB",
            "addressCountry": "GB"
          }
        }
      },
      "beckn:orderItems": [
        {
          "@type": "beckn:OrderItem",
          "beckn:lineId": "order-item-ce-001",
          "beckn:orderedItem": "item-ce-cambridge-morning-001",
          "beckn:quantity": 1,
          "beckn:acceptedOffer": {
            "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld",
            "@type": "beckn:Offer",
            "beckn:id": "offer-ce-cambridge-morning-001",
            "beckn:descriptor": {
              "@type": "beckn:Descriptor",
              "schema:name": "Cambridge Morning Compute Slot"
            },
            "beckn:provider": "provider-gridflex-001",
            "beckn:items": [
              "item-ce-cambridge-morning-001"
            ],
            "beckn:price": {
              "currency": "GBP",
              "price": 0.102
            },
            "beckn:offerAttributes": {
              "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/ComputeEnergy/v1/context.jsonld",
              "@type": "beckn:ComputeEnergyPricing",
              "beckn:unit": "per_kWh",
              "beckn:priceStability": "volatile"
            }
          },
          "beckn:orderItemAttributes": {
            "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/ComputeEnergy/v1/context.jsonld",
            "@type": "beckn:ComputeEnergyWindow",
            "beckn:slotId": "slot-cambridge-morning-20251117-001",
            "beckn:gridParameters": {
              "gridArea": "Cambridge-East",
              "gridZone": "UK-EAST-1",
              "renewableMix": 45,
              "renewableMixChange": {
                "previousValue": 80,
                "currentValue": 45,
                "change": -35,
                "changeUnit": "percentage_points",
                "changeType": "decreased"
              },
              "carbonIntensity": 280,
              "carbonIntensityUnit": "gCO2/kWh",
              "carbonIntensityChange": {
                "previousValue": 120,
                "currentValue": 280,
                "change": 160,
                "changeUnit": "gCO2/kWh",
                "changeType": "increased"
              },
              "frequency": 49.8,
              "frequencyUnit": "Hz"
            },
            "beckn:timeWindow": {
              "start": "2025-11-17T10:00:00Z",
              "end": "2025-11-17T14:00:00Z",
              "duration": "PT4H"
            },
            "beckn:pricingParameters": {
              "spotPrice": 0.132,
              "currency": "GBP",
              "unit": "per_kWh",
              "spotPriceChange": {
                "previousValue": 0.102,
                "currentValue": 0.132,
                "change": 0.03,
                "changeUnit": "GBP_per_kWh",
                "changeType": "increased",
                "changePercentage": 29.4
              },
              "actualCost": 475.2,
              "costImpact": {
                "reductionSavings": 14.4,
                "currency": "GBP"
              }
            },
            "beckn:capacityParameters": {
              "activeCapacity": 0.9,
              "capacityUnit": "MW"
            }
          }
        }
      ],
      "beckn:fulfillment": {
        "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld",
        "@type": "beckn:Fulfillment",
        "beckn:id": "fulfillment-ce-cambridge-001",
        "beckn:mode": "GRID-BASED",
        "beckn:status": "IN_PROGRESS",
        "beckn:deliveryAttributes": {
          "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/ComputeEnergy/v1/context.jsonld",
          "@type": "beckn:ComputeEnergyFulfillment",
          "beckn:computeLoad": 0.9,
          "beckn:computeLoadUnit": "MW",
          "beckn:location": {
            "@type": "beckn:Location",
            "geo": {
              "type": "Point",
              "coordinates": [0.1218, 52.2053]
            },
            "address": {
              "streetAddress": "ComputeCloud Data Centre",
              "addressLocality": "Cambridge",
              "addressRegion": "East England",
              "postalCode": "CB1 2AB",
              "addressCountry": "GB"
            }
          },
          "beckn:timeWindow": {
            "start": "2025-11-17T10:00:00Z",
            "end": "2025-11-17T14:00:00Z"
          },
          "beckn:workloadMetadata": {
            "workloadType": "AI_TRAINING",
            "workloadId": "batch-a-001",
            "gpuHours": 3600,
            "carbonBudget": 432,
            "carbonBudgetUnit": "kgCO2"
          },
          "beckn:shiftDetails": {
            "shiftedLoad": 0.3,
            "shiftedLoadUnit": "MW",
            "targetLocation": "Manchester",
            "targetOrder": "order-ce-manchester-afternoon-001",
            "shiftReason": "grid_stress_response",
            "shiftTimestamp": "2025-11-17T14:02:00Z",
            "batterySupportActivated": true,
            "batteryDischarge": 0.15,
            "batteryDischargeUnit": "MW"
          },
          "beckn:flexibilityProvided": {
            "loadReduction": 0.3,
            "reductionUnit": "MW",
            "responseTime": "PT2M",
            "gridImpact": "positive"
          }
        }
      },
      "beckn:orderAttributes": {
        "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/ComputeEnergy/v1/context.jsonld",
        "@type": "beckn:ComputeEnergyOrder",
        "beckn:requestType": "workload_shift",
        "beckn:responseToEvent": "grid-event-cambridge-20251117-001",
        "beckn:confirmationTimestamp": "2025-11-17T08:15:02Z",
        "beckn:updateTimestamp": "2025-11-17T14:02:02Z"
      }
    }
  }
}

